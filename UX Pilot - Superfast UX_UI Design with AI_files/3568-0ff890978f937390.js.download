"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3568],{38597:function(e){e.exports={URLS:{streamUrl:"https://stream.uxpilot.ai",authFuncUrl:"https://us-central1-uxpilot-auth.cloudfunctions.net",kbUrl:"https://kb.uxpilot.ai"},isProd:!0,isDev:!1,isLocal:!1,FEATURE_FLAGS:{L1_GENERATION:!1}}},79582:function(e,t,n){n.d(t,{b:function(){return getUserInfo},o:function(){return updateUsersToDB}});var r=n(45610),a=n(50044),s=n(38597);function getUserInfo(e){return _getUserInfo.apply(this,arguments)}function _getUserInfo(){return(_getUserInfo=(0,r._)(function(e){var t,n;return(0,a.Jh)(this,function(r){switch(r.label){case 0:t=e.uid,n=e.endpoint,r.label=1;case 1:return r.trys.push([1,4,,5]),[4,fetch("".concat(s.URLS.streamUrl,"/").concat(n),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uid:t})})];case 2:return[4,r.sent().json()];case 3:return[2,r.sent()];case 4:return console.error("Something went wrong!",r.sent()),[3,5];case 5:return[2]}})})).apply(this,arguments)}function updateUsersToDB(e){return _updateUsersToDB.apply(this,arguments)}function _updateUsersToDB(){return(_updateUsersToDB=(0,r._)(function(e){var t,n,r;return(0,a.Jh)(this,function(a){switch(a.label){case 0:t=e.uid,n=e.endpoint,a.label=1;case 1:return a.trys.push([1,4,,5]),[4,fetch("".concat(s.URLS.streamUrl,"/").concat(n),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uid:t})})];case 2:return[4,a.sent().json()];case 3:return[2,a.sent()];case 4:return console.error("Something went wrong",r=a.sent()),[2,r];case 5:return[2]}})})).apply(this,arguments)}},92872:function(e,t,n){n.d(t,{uJ:function(){return addingUsersToDB},w7:function(){return signOut}});var r=n(45610),a=n(50044),s=n(74109),i=n(38597);function signOut(){return _signOut.apply(this,arguments)}function _signOut(){return(_signOut=(0,r._)(function(){var e;return(0,a.Jh)(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,s.ZP.auth().signOut()];case 1:return t.sent(),e=localStorage.getItem("cookieConsent"),localStorage.removeItem("tokenId"),localStorage.setItem("cookieConsent",e),window.location.href="/",[3,3];case 2:return t.sent(),[3,3];case 3:return[2]}})})).apply(this,arguments)}function addingUsersToDB(e){return _addingUsersToDB.apply(this,arguments)}function _addingUsersToDB(){return(_addingUsersToDB=(0,r._)(function(e){var t,n,r,s,o,u,c,l,p,d,f;return(0,a.Jh)(this,function(a){switch(a.label){case 0:t=e.uid,n=e.email,r=e.photoURL,s=e.displayName,o=e.userCountry,u=e.authMethod,c=e.referringUrl,l=e.ga4ClientId,p=e.gclAwCookie,d=e.fbc,f=e.fbp,a.label=1;case 1:return a.trys.push([1,4,,5]),[4,fetch("".concat(i.URLS.streamUrl,"/add-user-data"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uid:t,email:n,photoURL:r,displayName:s,userCountry:o,authMethod:u,referringUrl:c,ga4ClientId:l,gclAwCookie:p,fbc:d,fbp:f})})];case 2:return[4,a.sent().json()];case 3:return[2,a.sent().status];case 4:return a.sent(),[3,5];case 5:return[2]}})})).apply(this,arguments)}(0,r._)(function(e){var t;return(0,a.Jh)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),t=s.ZP.auth.GoogleAuthProvider.credential(e.credential),[4,s.ZP.auth().signInWithCredential(t)];case 1:case 2:return n.sent(),[3,3];case 3:return[2]}})})},74109:function(e,t,n){n.d(t,{I8:function(){return w},ZP:function(){return S},zk:function(){return U},w2:function(){return I},qj:function(){return v},Gn:function(){return b},rd:function(){return y},tO:function(){return C}});var r,a,s,i,o,u=n(45610),c=n(41369),l=n(50044),p=n(78199);n(12075),n(648),n(61708),n(24086);var d=n(27007),f=n(92872),h=n(38597);function addToActiveCampaignAPI(e){return _addToActiveCampaignAPI.apply(this,arguments)}function _addToActiveCampaignAPI(){return(_addToActiveCampaignAPI=(0,u._)(function(e){var t,n,r,a,s,i,o,u,c;return(0,l.Jh)(this,function(l){switch(l.label){case 0:t=e.email,n=e.firstName,r=e.lastName,a=e.referringUrl,s=e.ga4ClientId,i=e.gclAwCookie,o=e.fbc,u=e.fbp,l.label=1;case 1:return l.trys.push([1,4,,5]),c={email:t,firstName:n,lastName:r},a&&(c.referringUrl=a),s&&(c.ga4ClientId=s),i&&(c.gclAwCookie=i),o&&(c.fbc=o),u&&(c.fbp=u),[4,fetch("".concat(h.URLS.streamUrl,"/add-to-ac"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)})];case 2:return[4,l.sent().json()];case 3:case 4:return l.sent(),[3,5];case 5:return[2]}})})).apply(this,arguments)}var g=n(79582),m=n(60453);function handleGoogleSignInResult(e){return _handleGoogleSignInResult.apply(this,arguments)}function _handleGoogleSignInResult(){return(_handleGoogleSignInResult=(0,u._)(function(e){var t,n,r,a,s,i,o,u,p,d,h,m,b,v,y,I,U,w;return(0,l.Jh)(this,function(l){switch(l.label){case 0:if(!(null==e?void 0:null===(r=e.user)||void 0===r?void 0:null===(n=r.providerData)||void 0===n?void 0:null===(t=n[0])||void 0===t?void 0:t.uid))return[2,null];return s=(a=e.user.providerData[0]).uid,i=a.email,o=a.photoURL,p=(u=a.displayName).split(" ")[0],d=u.split(" ").slice(1).join(" "),h=localStorage.getItem("referringUrl"),m=localStorage.getItem("ga4ClientId"),b=localStorage.getItem("gclAw"),v=localStorage.getItem("fbc"),y=localStorage.getItem("fbp"),[4,fetch("https://api.ipify.org?format=json")];case 1:case 3:return[4,l.sent().json()];case 2:return I=l.sent().ip,[4,fetch("https://ipapi.co/".concat(I,"/json/"))];case 4:return U=l.sent().country_name,Object.keys(w={uid:s,email:i,photoURL:o,displayName:u,userCountry:U,authMethod:"google",referringUrl:h,ga4ClientId:m,gclAwCookie:b,fbc:v,fbp:y}).forEach(function(e){return void 0===w[e]||null===w[e]?delete w[e]:{}}),[4,(0,f.uJ)(w)];case 5:return l.sent(),addToActiveCampaignAPI((0,c._)({email:i,firstName:p,lastName:d,tag:"uxpilot"},h&&{referringUrl:h},m&&{ga4ClientId:m},b&&{gclAwCookie:b},v&&{fbc:v},y&&{fbp:y})),[4,(0,g.o)({uid:s,endpoint:"update-user-data"})];case 6:return l.sent(),[4,(0,g.b)({uid:s,endpoint:"get-user-data"})];case 7:return[2,l.sent().data]}})})).apply(this,arguments)}var b=(r=(0,u._)(function(e){var t,n;return(0,l.Jh)(this,function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),t=d.hJ.credential(e),[4,(0,d.sB)(w,t)];case 1:return[4,handleGoogleSignInResult(r.sent())];case 2:return[2,r.sent()];case 3:throw console.error("Error signing in with Google One Tap:",n=r.sent()),n;case 4:return[2]}})}),function(e){return r.apply(this,arguments)}),v=(a=(0,u._)(function(){var e,t,n;return(0,l.Jh)(this,function(r){switch(r.label){case 0:e=new d.hJ,r.label=1;case 1:return r.trys.push([1,4,,5]),[4,(0,d.rh)(w,e)];case 2:return t=r.sent(),(0,m.hb)("googleSignIn"),[4,handleGoogleSignInResult(t)];case 3:return[2,r.sent()];case 4:throw console.error("Error signing in with Google:",n=r.sent()),n;case 5:return[2]}})}),function(){return a.apply(this,arguments)}),y=(s=(0,u._)(function(e,t,n){var r,a,s,i,o,u,c,p,h,m,b,v,y,I,U,C,S,_;return(0,l.Jh)(this,function(l){switch(l.label){case 0:e=e.replace("@googlemail.com","@gmail.com"),l.label=1;case 1:return l.trys.push([1,11,,12]),[4,(0,d.Xb)(w,e,t)];case 2:return r=l.sent(),[4,(0,d.ck)(r.user,{displayName:n})];case 3:if(l.sent(),!(r&&r.user&&r.user.providerData&&r.user.providerData[0]&&r.user.uid))return[3,10];return i=(s=r.user.providerData[0]).email,o=s.photoURL,u=s.displayName,c=r.user.uid,p=u.split(" ")[0],h=null===(a=u.split(" "))||void 0===a?void 0:a.slice(1).join(" "),m=localStorage.getItem("referringUrl"),b=localStorage.getItem("ga4ClientId"),v=localStorage.getItem("gclAw"),y=localStorage.getItem("fbc"),I=localStorage.getItem("fbp"),[4,fetch("https://api.ipify.org?format=json")];case 4:case 6:return[4,l.sent().json()];case 5:return U=l.sent().ip,[4,fetch("https://ipapi.co/".concat(U,"/json/"))];case 7:return C=l.sent().country_name,Object.keys(S={uid:c,email:i,photoURL:o,displayName:u,userCountry:C,authMethod:"email",referringUrl:m,ga4ClientId:b,gclAwCookie:v,fbc:y,fbp:I}).forEach(function(e){return void 0===S[e]||null===S[e]?delete S[e]:{}}),[4,(0,f.uJ)(S)];case 8:return l.sent(),[4,(0,g.o)({uid:c,endpoint:"update-user-data"})];case 9:return l.sent(),_={email:i,firstName:p,lastName:h,tag:"uxpilot"},null!=m&&(_.referringUrl=m),null!=b&&(_.ga4ClientId=b),null!=v&&(_.gclAwCookie=v),null!=y&&(_.fbc=y),null!=I&&(_.fbp=I),addToActiveCampaignAPI(_),[2,c];case 10:return[3,12];case 11:return[2,l.sent()];case 12:return[2]}})}),function(e,t,n){return s.apply(this,arguments)}),I=(i=(0,u._)(function(e,t){var n,r,a,s;return(0,l.Jh)(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),[4,(0,d.e5)(w,e,t)];case 1:return[4,(n=i.sent()).user.getIdToken()];case 2:return r=i.sent(),(0,m.hb)("googleSignIn"),a=n.user.uid,[2,{providerData:null!==(s=n.user.providerData)&&void 0!==s?s:[],uid:a,user:n.user,token:r,email:e}];case 3:return[2,i.sent()];case 4:return[2]}})}),function(e,t){return i.apply(this,arguments)}),U=(o=(0,u._)(function(e){var t;return(0,l.Jh)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,(0,d.w$)(e)];case 1:return n.sent(),[3,3];case 2:return console.error("Error sending verification email:",t=n.sent()),[2,t];case 3:return[2]}})}),function(e){return o.apply(this,arguments)});p.Z.apps.length||p.Z.initializeApp({apiKey:"AIzaSyBvx3L1jW-Q53bHwZc22SZUufdXhxeWbwc",authDomain:"uxpilot-auth.firebaseapp.com",projectId:"uxpilot-auth",storageBucket:"uxpilot-auth.appspot.com",messagingSenderId:"485825078314",appId:"1:485825078314:web:b742b234195e58f8b74f53"}),p.Z.firestore();var w=p.Z.auth(),C=p.Z.storage(),S=p.Z},60453:function(e,t,n){n.d(t,{hb:function(){return dispatchCustomEvent},zW:function(){return a}});var r=n(2265),a={wireframesData:"wireframesData",groupsData:"groupsData",userInfo:"userInfo",updateGroupsData:"updateGroupsData",exportGroupWireframe:"exportGroupWireframe",saveGroupWireframe:"saveGroupWireframe",saveWireframe:"saveWireframe",syncing:"syncing",pageDeleted:"pageDeleted",getPagesData:"getPagesData",panningEnabled:"panningEnabled",panningDisabled:"panningDisabled"};t.ZP=function(e,t){var n=(0,r.useCallback)(function(e){t(e.detail)},[t]);(0,r.useEffect)(function(){return document.addEventListener(e,n),function(){document.removeEventListener(e,n)}},[e,n])};var dispatchCustomEvent=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new CustomEvent(e,{detail:t});document.dispatchEvent(n)}}}]);